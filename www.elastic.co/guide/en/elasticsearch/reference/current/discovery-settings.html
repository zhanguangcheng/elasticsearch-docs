<html><!-- Mirrored from www.elastic.co/guide/en/elasticsearch/reference/current/discovery-settings.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 Apr 2020 14:17:58 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->

    
<meta charset="UTF-8">
<title>Important discovery and cluster formation settings </title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.6]">
<link rel="up" href="important-settings.html" title="Important Elasticsearch configuration">
<link rel="prev" href="network.host.html" title="network.host">
<link rel="next" href="heap-size.html" title="Setting the heap size">
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.6">
<meta name="DC.subject" content="Elasticsearch">
<meta name="DC.identifier" content="7.6">

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="../../../../../apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../../../../../apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../../../../../apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../../../../../apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../../../../../apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../../../../../apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../../../../../apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../../../../../apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../../apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="../../../../../favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../../../../android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="../../../../../favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="../../../../../favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="../../../../../manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../../../../../mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd">
    <meta name="yandex-verification" content="d8a47e95d0972434">
    <meta name="localized" content="true">
    <meta name="st:robots" content="follow,index">
    <meta property="og:image" content="../../../../../static/images/elastic-logo-200.png">
    <link rel="shortcut icon" href="../../../../../favicon.ico" type="image/x-icon">
    <link rel="icon" href="../../../../../favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="../../../../../favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="../../../../../favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="../../../../../favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="../../../../static/styles.css">
  </head>

  <body>
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="./gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type="text/javascript">
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id="ZN_emkP0oSe9Qrn7kF"><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id="elastic-nav" style="display:none;"></div>
    <script src="../../../../../elastic-nav.js"></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="https://www.elastic.co/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.6]</a></span>
»
<span class="breadcrumb-link"><a href="setup.html">Set up Elasticsearch</a></span>
»
<span class="breadcrumb-link"><a href="important-settings.html">Important Elasticsearch configuration</a></span>
»
<span class="breadcrumb-node">Important discovery and cluster formation settings</span>
</div>
<div class="navheader">
<span class="prev">
<a href="network.host.html">« <code class="literal">network.host</code></a>
</span>
<span class="next">
<a href="heap-size.html">Setting the heap size »</a>
</span>
</div>
<div class="section">
<div class="titlepage"><div><div>
<h2 class="title"><a class="dashAnchor" name="//dash_ref_1621/Section/Sections/1"></a><a class="dashAnchor" name="//dash_ref_1622/Section/Important%20discovery%20and%20cluster%20formation%20settings/0"></a><a id="discovery-settings"></a>Important discovery and cluster formation settings</h2>
</div></div></div>

<p>There are two important discovery and cluster formation settings that should be
configured before going to production so that nodes in the cluster can discover
each other and elect a master node.</p>
<h4><a class="dashAnchor" name="//dash_ref_1619/Section/discovery%2Eseed%5Fhosts/0"></a><a id="unicast.hosts"></a><code class="literal">discovery.seed_hosts</code></h4>
<p>Out of the box, without any network configuration, Elasticsearch will bind to
the available loopback addresses and will scan local ports 9300 to 9305 to try
to connect to other nodes running on the same server. This provides an
auto-clustering experience without having to do any configuration.</p>
<p>When you want to form a cluster with nodes on other hosts, you should use the
<code class="literal">discovery.seed_hosts</code> setting to provide a list of other nodes in the cluster
that are master-eligible and likely to be live and contactable in order to seed
the <a class="xref" href="modules-discovery-hosts-providers.html" title="Discovery">discovery process</a>. This setting
should be a list of the addresses of all the master-eligible nodes in the
cluster. Each address can be either an IP address or a hostname which resolves
to one or more IP addresses via DNS.</p>
<p>If your master-eligible nodes do not have fixed names or addresses, use an
<a class="xref" href="modules-discovery-hosts-providers.html#built-in-hosts-providers" title="Seed hosts providers">alternative hosts provider</a> to find their addresses
dynamically.</p>
<h4><a class="dashAnchor" name="//dash_ref_1620/Section/cluster%2Einitial%5Fmaster%5Fnodes/0"></a><a id="initial_master_nodes"></a><code class="literal">cluster.initial_master_nodes</code></h4>
<p>When you start a brand new Elasticsearch cluster for the very first time, there
is a <a class="xref" href="modules-discovery-bootstrap-cluster.html" title="Bootstrapping a cluster">cluster bootstrapping</a> step, which
determines the set of master-eligible nodes whose votes are counted in the very
first election. In <a class="xref" href="bootstrap-checks.html#dev-vs-prod-mode" title="Development vs. production mode">development mode</a>, with no discovery
settings configured, this step is automatically performed by the nodes
themselves. As this auto-bootstrapping is <a class="xref" href="modules-discovery-quorums.html" title="Quorum-based decision making">inherently
unsafe</a>, when you start a brand new cluster in <a class="xref" href="bootstrap-checks.html#dev-vs-prod-mode" title="Development vs. production mode">production
mode</a>, you must explicitly list the master-eligible nodes whose votes should be
counted in the very first election. This list is set using the
<code class="literal">cluster.initial_master_nodes</code> setting. You should not use this setting when
restarting a cluster or adding a new node to an existing cluster.</p>
<div class="pre_wrapper lang-yaml">
<pre class="programlisting prettyprint lang-yaml">discovery.seed_hosts:
   - 192.168.1.10:9300
   - 192.168.1.11 <a id="CO10-1"></a><i class="conum" data-value="1"></i>
   - seeds.mydomain.com <a id="CO10-2"></a><i class="conum" data-value="2"></i>
   - [0:0:0:0:0:ffff:c0a8:10c]:9301 <a id="CO10-3"></a><i class="conum" data-value="3"></i>
cluster.initial_master_nodes: <a id="CO10-4"></a><i class="conum" data-value="4"></i>
   - master-node-a
   - master-node-b
   - master-node-c</pre>
</div>
<div class="calloutlist">
<table border="0" summary="Callout list">
<tbody><tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO10-1"><i class="conum" data-value="1"></i></a></p>
</td>
<td align="left" valign="top">
<p>The port is optional and usually defaults to <code class="literal">9300</code>, but this default can
be <a class="xref" href="modules-discovery-hosts-providers.html#built-in-hosts-providers" title="Seed hosts providers">overridden</a> by certain settings.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO10-2"><i class="conum" data-value="2"></i></a></p>
</td>
<td align="left" valign="top">
<p>If a hostname resolves to multiple IP addresses then the node will attempt to
discover other nodes at all resolved addresses.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO10-3"><i class="conum" data-value="3"></i></a></p>
</td>
<td align="left" valign="top">
<p>IPv6 addresses must be enclosed in square brackets.</p>
</td>
</tr>
<tr>
<td align="left" valign="top" width="5%">
<p><a href="#CO10-4"><i class="conum" data-value="4"></i></a></p>
</td>
<td align="left" valign="top">
<p>The initial master nodes should be identified by their
<a class="xref" href="node.name.html" title="node.name"><code class="literal">node.name</code></a>, which defaults to their hostname. Make sure that
the value in <code class="literal">cluster.initial_master_nodes</code> matches the <code class="literal">node.name</code>
exactly. If you use a fully-qualified domain name such as
<code class="literal">master-node-a.example.com</code> for your node names then you must use the
fully-qualified name in this list; conversely if <code class="literal">node.name</code> is a bare
hostname without any trailing qualifiers then you must also omit the
trailing qualifiers in <code class="literal">cluster.initial_master_nodes</code>.</p>
</td>
</tr>
</tbody></table>
</div>
<p>For more information, see <a class="xref" href="modules-discovery-bootstrap-cluster.html" title="Bootstrapping a cluster">Bootstrapping a cluster</a> and
<a class="xref" href="modules-discovery-settings.html" title="Discovery and cluster formation settings">Discovery and cluster formation settings</a>.</p>
</div>
<div class="navfooter">
<span class="prev">
<a href="network.host.html">« <code class="literal">network.host</code></a>
</span>
<span class="next">
<a href="heap-size.html">Setting the heap size »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=default&amp;elektra=docs&amp;storm=top-video">Elasticsearch Service: Free Trial</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&amp;elektra=docs&amp;storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&amp;elektra=docs&amp;storm=top-video">ELK for Logs &amp; Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id="elastic-footer"></div>
<script src="../../../../../elastic-footer.js"></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"https://www.elastic.co/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="../../../../../static/js/swiftype_app_search.umd.min.js"></script>
<script src="../../../../static/jquery.js"></script>
<script type="text/javascript" src="../../../../static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  

<!-- Mirrored from www.elastic.co/guide/en/elasticsearch/reference/current/discovery-settings.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 Apr 2020 14:17:58 GMT -->

<script type="text/javascript" src="https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF"></script><script type="text/javascript" src="https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF"></script></body></html>