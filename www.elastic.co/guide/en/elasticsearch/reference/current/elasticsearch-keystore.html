<html><!-- Mirrored from www.elastic.co/guide/en/elasticsearch/reference/current/elasticsearch-keystore.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 Apr 2020 14:19:18 GMT --><!-- Added by HTTrack --><head><meta http-equiv="content-type" content="text/html;charset=utf-8"><!-- /Added by HTTrack -->

    
<meta charset="UTF-8">
<title>elasticsearch-keystore </title>
<link rel="home" href="index.html" title="Elasticsearch Reference [7.6]">
<link rel="up" href="commands.html" title="Command line tools">
<link rel="prev" href="elasticsearch-croneval.html" title="elasticsearch-croneval">
<link rel="next" href="migrate-tool.html" title="elasticsearch-migrate">
<meta name="DC.type" content="Learn/Docs/Elasticsearch/Reference/7.6">
<meta name="DC.subject" content="Elasticsearch">
<meta name="DC.identifier" content="7.6">

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" sizes="57x57" href="../../../../../apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="../../../../../apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="../../../../../apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="../../../../../apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="../../../../../apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="../../../../../apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="../../../../../apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="../../../../../apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../../../../../apple-icon-180x180.png">
    <link rel="icon" type="image/png" href="../../../../../favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../../../../android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="../../../../../favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="../../../../../favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="../../../../../manifest.json">
    <meta name="apple-mobile-web-app-title" content="Elastic">
    <meta name="application-name" content="Elastic">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="../../../../../mstile-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <meta name="naver-site-verification" content="936882c1853b701b3cef3721758d80535413dbfd">
    <meta name="yandex-verification" content="d8a47e95d0972434">
    <meta name="localized" content="true">
    <meta name="st:robots" content="follow,index">
    <meta property="og:image" content="../../../../../static/images/elastic-logo-200.png">
    <link rel="shortcut icon" href="../../../../../favicon.ico" type="image/x-icon">
    <link rel="icon" href="../../../../../favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon-precomposed" sizes="64x64" href="../../../../../favicon_64x64_16bit.png">
    <link rel="apple-touch-icon-precomposed" sizes="32x32" href="../../../../../favicon_32x32.png">
    <link rel="apple-touch-icon-precomposed" sizes="16x16" href="../../../../../favicon_16x16.png">
    <!-- Give IE8 a fighting chance -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="../../../../static/styles.css">
  </head>

  <body>
    
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="" src="./gtag/js?id=UA-12395217-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-12395217-16');
    </script>

    <!--BEGIN QUALTRICS WEBSITE FEEDBACK SNIPPET-->
    <script type="text/javascript">
      (function(){var g=function(e,h,f,g){
      this.get=function(a){for(var a=a+"=",c=document.cookie.split(";"),b=0,e=c.length;b<e;b++){for(var d=c[b];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};
      this.set=function(a,c){var b="",b=new Date;b.setTime(b.getTime()+6048E5);b="; expires="+b.toGMTString();document.cookie=a+"="+c+b+"; path=/; "};
      this.check=function(){var a=this.get(f);if(a)a=a.split(":");else if(100!=e)"v"==h&&(e=Math.random()>=e/100?0:100),a=[h,e,0],this.set(f,a.join(":"));else return!0;var c=a[1];if(100==c)return!0;switch(a[0]){case "v":return!1;case "r":return c=a[2]%Math.floor(100/c),a[2]++,this.set(f,a.join(":")),!c}return!0};
      this.go=function(){if(this.check()){var a=document.createElement("script");a.type="text/javascript";a.src=g;document.body&&document.body.appendChild(a)}};
      this.start=function(){var a=this;window.addEventListener?window.addEventListener("load",function(){a.go()},!1):window.attachEvent&&window.attachEvent("onload",function(){a.go()})}};
      try{(new g(100,"r","QSI_S_ZN_emkP0oSe9Qrn7kF","https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF")).start()}catch(i){}})();
    </script><div id="ZN_emkP0oSe9Qrn7kF"><!--DO NOT REMOVE-CONTENTS PLACED HERE--></div>
    <!--END WEBSITE FEEDBACK SNIPPET-->

    <div id="elastic-nav" style="display:none;"></div>
    <script src="../../../../../elastic-nav.js"></script>

    <!-- Subnav -->
    <div>
      <div>
        <div class="tertiary-nav d-none d-md-block">
          <div class="container">
            <div class="p-t-b-15 d-flex justify-content-between nav-container">
              <div class="breadcrum-wrapper"><span><a href="https://www.elastic.co/guide/" style="font-size: 14px; font-weight: 600; color: #000;">Docs</a></span></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">

          <section id="guide" lang="en">
            <div class="container">
              <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 guide-section">
                  <!-- start body -->
                  
<div id="content">
<div class="breadcrumbs">
<span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference [7.6]</a></span>
»
<span class="breadcrumb-link"><a href="commands.html">Command line tools</a></span>
»
<span class="breadcrumb-node">elasticsearch-keystore</span>
</div>
<div class="navheader">
<span class="prev">
<a href="elasticsearch-croneval.html">« elasticsearch-croneval</a>
</span>
<span class="next">
<a href="migrate-tool.html">elasticsearch-migrate »</a>
</span>
</div>
<div class="chapter">
<div class="titlepage"><div><div>
<h2 class="title"><a class="dashAnchor" name="//dash_ref_2352/Section/Sections/1"></a><a class="dashAnchor" name="//dash_ref_2353/Section/elasticsearch%2Dkeystore/0"></a><a id="elasticsearch-keystore"></a>elasticsearch-keystore</h2>
</div></div></div>
<p>The <code class="literal">elasticsearch-keystore</code> command manages <a class="xref" href="secure-settings.html" title="Secure settings">secure settings</a>
in the Elasticsearch keystore.</p>
<h3><a class="dashAnchor" name="//dash_ref_2342/Section/Synopsis/0"></a><a id="elasticsearch-keystore-synopsis"></a>Synopsis</h3>
<div class="pre_wrapper lang-shell">
<pre class="programlisting prettyprint lang-shell">bin/elasticsearch-keystore
([add &lt;setting&gt;] [--stdin] |
[add-file &lt;setting&gt; &lt;path&gt;] | [create] |
[list] | [remove &lt;setting&gt;] | [upgrade])
[-h, --help] ([-s, --silent] | [-v, --verbose])</pre>
</div>
<h3><a class="dashAnchor" name="//dash_ref_2343/Section/Description/0"></a><a id="elasticsearch-keystore-description"></a>Description</h3>
<div class="important admon">
<div class="icon"></div>
<div class="admon_content">
<p>This command should be run as the user that will run Elasticsearch.</p>
</div>
</div>
<p>Currently, all secure settings are node-specific settings that must have the
same value on every node. Therefore you must run this command on every node.</p>
<p>Modifications to the keystore do not take effect until you restart Elasticsearch.</p>
<p>Only some settings are designed to be read from the keystore. However, there
is no validation to block unsupported settings from the keystore and they can
cause Elasticsearch to fail to start. To see whether a setting is supported in the
keystore, see the setting reference.</p>
<h3><a class="dashAnchor" name="//dash_ref_2344/Section/Parameters/0"></a><a id="elasticsearch-keystore-parameters"></a>Parameters</h3>
<div class="variablelist">
<dl class="variablelist">
<dt>
<span class="term">
<code class="literal">add &lt;setting&gt;</code>
</span>
</dt>
<dd>
Adds settings to the keystore. By default, you are prompted
for the value of the setting.
</dd>
<dt>
<span class="term">
<code class="literal">add-file &lt;setting&gt; &lt;path&gt;</code>
</span>
</dt>
<dd>
Adds a file to the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">create</code>
</span>
</dt>
<dd>
Creates the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">-h, --help</code>
</span>
</dt>
<dd>
Returns all of the command parameters.
</dd>
<dt>
<span class="term">
<code class="literal">list</code>
</span>
</dt>
<dd>
Lists the settings in the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">remove &lt;setting&gt;</code>
</span>
</dt>
<dd>
Removes a setting from the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">-s, --silent</code>
</span>
</dt>
<dd>
Shows minimal output.
</dd>
<dt>
<span class="term">
<code class="literal">--stdin</code>
</span>
</dt>
<dd>
When used with the <code class="literal">add</code> parameter, you can pass the setting value
through standard input (stdin). See <a class="xref" href="elasticsearch-keystore.html#add-string-to-keystore" title="Add settings to the keystore">Add settings to the keystore</a>.
</dd>
<dt>
<span class="term">
<code class="literal">upgrade</code>
</span>
</dt>
<dd>
Upgrades the internal format of the keystore.
</dd>
<dt>
<span class="term">
<code class="literal">-v, --verbose</code>
</span>
</dt>
<dd>
Shows verbose output.
</dd>
</dl>
</div>
<h3><a class="dashAnchor" name="//dash_ref_2345/Section/Examples/0"></a><a id="elasticsearch-keystore-examples"></a>Examples</h3>
<h4><a class="dashAnchor" name="//dash_ref_2346/Section/Create%20the%20keystore/0"></a><a id="creating-keystore"></a>Create the keystore</h4>
<p>To create the <code class="literal">elasticsearch.keystore</code>, use the <code class="literal">create</code> command:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-keystore create</pre>
</div>
<p>A <code class="literal">elasticsearch.keystore</code> file is created alongside the <code class="literal">elasticsearch.yml</code>
file.</p>
<h4><a class="dashAnchor" name="//dash_ref_2347/Section/List%20settings%20in%20the%20keystore/0"></a><a id="list-settings"></a>List settings in the keystore</h4>
<p>To list the settings in the keystore, use the <code class="literal">list</code> command.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-keystore list</pre>
</div>
<h4><a class="dashAnchor" name="//dash_ref_2348/Section/Add%20settings%20to%20the%20keystore/0"></a><a id="add-string-to-keystore"></a>Add settings to the keystore</h4>
<p>Sensitive string settings, like authentication credentials for Cloud plugins,
can be added with the <code class="literal">add</code> command:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-keystore add the.setting.name.to.set</pre>
</div>
<p>You are prompted to enter the value of the setting. To pass the value
through standard input (stdin), use the <code class="literal">--stdin</code> flag:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">cat /file/containing/setting/value | bin/elasticsearch-keystore add --stdin the.setting.name.to.set</pre>
</div>
<h4><a class="dashAnchor" name="//dash_ref_2349/Section/Add%20files%20to%20the%20keystore/0"></a><a id="add-file-to-keystore"></a>Add files to the keystore</h4>
<p>You can add sensitive files, like authentication key files for Cloud plugins,
using the <code class="literal">add-file</code> command. Be sure to include your file path as an argument
after the setting name.</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-keystore add-file the.setting.name.to.set /path/example-file.json</pre>
</div>
<h4><a class="dashAnchor" name="//dash_ref_2350/Section/Remove%20settings%20from%20the%20keystore/0"></a><a id="remove-settings"></a>Remove settings from the keystore</h4>
<p>To remove a setting from the keystore, use the <code class="literal">remove</code> command:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-keystore remove the.setting.name.to.remove</pre>
</div>
<h4><a class="dashAnchor" name="//dash_ref_2351/Section/Upgrade%20the%20keystore/0"></a><a id="keystore-upgrade"></a>Upgrade the keystore</h4>
<p>Occasionally, the internal format of the keystore changes. When Elasticsearch is
installed from a package manager, an upgrade of the on-disk keystore to the new
format is done during package upgrade. In other cases, Elasticsearch performs the upgrade
during node startup. This requires that Elasticsearch has write permissions to the
directory that contains the keystore. Alternatively, you can manually perform
such an upgrade by using the <code class="literal">upgrade</code> command:</p>
<div class="pre_wrapper lang-sh">
<pre class="programlisting prettyprint lang-sh">bin/elasticsearch-keystore upgrade</pre>
</div>
</div>
<div class="navfooter">
<span class="prev">
<a href="elasticsearch-croneval.html">« elasticsearch-croneval</a>
</span>
<span class="next">
<a href="migrate-tool.html">elasticsearch-migrate »</a>
</span>
</div>
</div>

                  <!-- end body -->
                </div>
                <div class="col-xs-12 col-sm-4 col-md-4" id="right_col">
                  <div id="rtpcontainer" style="display: block;">
                    <div class="mktg-promo">
                      <h3>Most Popular</h3>
                      <ul class="icons">
                        <li class="icon-elasticsearch-white"><a href="https://www.elastic.co/cloud/elasticsearch-service/signup?baymax=default&amp;elektra=docs&amp;storm=top-video">Elasticsearch Service: Free Trial</a></li>
                        <li class="icon-kibana-white"><a href="https://www.elastic.co/webinars/getting-started-kibana?baymax=default&amp;elektra=docs&amp;storm=top-video">Intro to Kibana: Video</a></li>
                        <li class="icon-logstash-white"><a href="https://www.elastic.co/webinars/introduction-elk-stack?baymax=default&amp;elektra=docs&amp;storm=top-video">ELK for Logs &amp; Metrics: Video</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

        </div>


<div id="elastic-footer"></div>
<script src="../../../../../elastic-footer.js"></script>
<!-- Footer Section end-->

      </section>
    </div>

<script type="text/javascript">
	var suggestionsUrl = "https://search.elastic.co/suggest";
	var localeUrl = '{"relative_url_prefix":"https://www.elastic.co/","code":"en-us","display_code":"en-us","url":"/guide_template"}';
</script>
<script src="../../../../../static/js/swiftype_app_search.umd.min.js"></script>
<script src="../../../../static/jquery.js"></script>
<script type="text/javascript" src="../../../../static/docs.js"></script>
<script type="text/javascript">
  window.initial_state = {}</script>
  

<!-- Mirrored from www.elastic.co/guide/en/elasticsearch/reference/current/elasticsearch-keystore.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 01 Apr 2020 14:19:18 GMT -->

<script type="text/javascript" src="https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF"></script><script type="text/javascript" src="https://znemkp0ose9qrn7kf-elastic.siteintercept.qualtrics.com/WRSiteInterceptEngine/?Q_ZID=ZN_emkP0oSe9Qrn7kF"></script></body></html>